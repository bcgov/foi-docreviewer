/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{516:function(wa,sa,h){h.r(sa);h.d(sa,"ByteRangeRequest",function(){return z});var pa=h(0),oa=h(1);h.n(oa);var ma=h(3),ia=h(176);wa=h(113);var ja=h(292),ea=h(87),y=h(83),x=h(291),f=h(193);h=h(437);var e=[],a=[],b=window,n=function(){return function(){this.jo=1}}(),r;(function(ba){ba[ba.UNSENT=0]="UNSENT";ba[ba.DONE=4]="DONE"})(r||(r={}));var z=function(){function ba(fa,aa,ca,ha){var na=this;this.url=fa;this.range=aa;this.Zf=ca;
this.withCredentials=ha;this.oba=r;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);b.Uint8Array&&(this.request.responseType="arraybuffer");ha&&(this.request.withCredentials=ha);w.DISABLE_RANGE_HEADER||(Object(oa.isUndefined)(aa.stop)?this.request.setRequestHeader("Range","bytes="+aa.start):this.request.setRequestHeader("Range",["bytes=",aa.start,"-",aa.stop-1].join("")));ca&&Object.keys(ca).forEach(function(la){na.request.setRequestHeader(la,ca[la])});this.request.overrideMimeType?
this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=x.a.NOT_STARTED}ba.prototype.start=function(fa){var aa=this,ca=this.request;ca.onreadystatechange=function(){if(aa.aborted)return aa.status=x.a.ABORTED,fa({code:x.a.ABORTED});if(this.readyState===aa.oba.DONE){aa.kG();var ha=0===window.document.URL.indexOf("file:///");200===ca.status||206===ca.status||ha&&0===ca.status?(ha=b.F0(this),aa.JS(ha,fa)):(aa.status=
x.a.ERROR,fa({code:aa.status,status:aa.status}))}};this.request.send(null);this.status=x.a.STARTED};ba.prototype.JS=function(fa,aa){this.status=x.a.SUCCESS;if(aa)return aa(!1,fa)};ba.prototype.abort=function(){this.kG();this.aborted=!0;this.request.abort()};ba.prototype.kG=function(){var fa=Object(f.c)(this.url,this.range,a);-1!==fa&&a.splice(fa,1);if(0<e.length){fa=e.shift();var aa=new ba(fa.url,fa.range,this.Zf,this.withCredentials);fa.request=aa;a.push(fa);aa.start(Object(f.d)(fa))}};ba.prototype.extend=
function(fa){var aa=Object.assign({},this,fa.prototype);aa.constructor=fa;return aa};return ba}(),w=function(ba){function fa(aa,ca,ha,na,la){ha=ba.call(this,aa,ha,na)||this;ha.kk={};ha.HE=ca;ha.url=aa;ha.DISABLE_RANGE_HEADER=!1;ha.oB=z;ha.bU=3;ha.Zf=la||{};return ha}Object(pa.c)(fa,ba);fa.prototype.Ly=function(aa,ca,ha){var na=-1===aa.indexOf("?")?"?":"&";switch(ha){case !1:case y.a.NEVER_CACHE:aa=aa+na+"_="+Object(oa.uniqueId)();break;case !0:case y.a.CACHE:aa=aa+na+"_="+ca.start+","+(Object(oa.isUndefined)(ca.stop)?
"":ca.stop)}return aa};fa.prototype.VY=function(aa,ca,ha,na){void 0===ha&&(ha={});return new this.oB(aa,ca,ha,na)};fa.prototype.tka=function(aa,ca,ha,na,la){for(var ka=0;ka<e.length;ka++)if(Object(oa.isEqual)(e[ka].range,ca)&&Object(oa.isEqual)(e[ka].url,aa))return e[ka].Lh.push(na),e[ka].AH++,null;for(ka=0;ka<a.length;ka++)if(Object(oa.isEqual)(a[ka].range,ca)&&Object(oa.isEqual)(a[ka].url,aa))return a[ka].Lh.push(na),a[ka].AH++,null;ha={url:aa,range:ca,HE:ha,Lh:[na],AH:1};if(0===e.length&&a.length<
this.bU)return a.push(ha),ha.request=this.VY(aa,ca,la,this.withCredentials),ha;e.push(ha);return null};fa.prototype.cq=function(aa,ca,ha){var na=this.Ly(aa,ca,this.HE);(aa=this.tka(na,ca,this.HE,ha,this.Zf))&&aa.request.start(Object(f.d)(aa));return function(){var la=Object(f.c)(na,ca,a);if(-1!==la){var ka=--a[la].AH;0===ka&&a[la].request&&a[la].request.abort()}else la=Object(f.c)(na,ca,e),-1!==la&&(ka=--e[la].AH,0===ka&&e.splice(la,1))}};fa.prototype.a0=function(){return{start:-ia.a}};fa.prototype.Moa=
function(){var aa=-(ia.a+ia.e);return{start:aa-ia.d,end:aa}};fa.prototype.Sv=function(aa){var ca=this;this.OE=!0;var ha=ia.a;this.cq(this.url,this.a0(),function(na,la,ka){function ra(){var qa=ca.de.Z_();ca.cq(ca.url,qa,function(ta,va){if(ta)return Object(ma.j)("Error loading central directory: "+ta),aa(ta);va=Object(ea.a)(va);if(va.length!==qa.stop-qa.start)return aa("Invalid XOD file: Zip central directory data is wrong size! Should be "+(qa.stop-qa.start)+" but is "+va.length);ca.de.g5(va);ca.lM=
!0;ca.OE=!1;return aa(!1)})}if(na)return Object(ma.j)("Error loading end header: "+na),aa(na,la,ka);la=Object(ea.a)(la);if(la.length!==ha)return aa("Invalid XOD file: Zip end header data is wrong size!");try{ca.de=new ja.a(la)}catch(qa){return aa(qa)}ca.de.Iqa?ca.cq(ca.url,ca.Moa(),function(qa,ta){if(qa)return Object(ma.j)("Error loading zip64 header: "+qa),aa(qa);ta=Object(ea.a)(ta);ca.de.ira(ta);ra()}):ra()})};fa.prototype.A0=function(aa){aa(Object.keys(this.de.Dp))};fa.prototype.YQ=function(aa,
ca){var ha=this;if(this.de.KY(aa)){var na=this.de.zz(aa);if(na in this.kk){var la=this.hi[aa];la.Bu=this.kk[na];la.Bu.jo++;la.cancel=la.Bu.cancel}else{var ka=this.de.Pma(aa),ra=this.cq(this.url,ka,function(ta,va){ta?(Object(ma.j)('Error loading part "'+aa+'": '+ta),ha.cq(ha.url,ka,function(xa,Ja){if(xa)return ca(xa,aa);ha.k5(Ja,ka,na,aa,ca)})):ha.k5(va,ka,na,aa,ca)}),qa=this.hi[aa];qa&&(qa.S7=!0,qa.cancel=function(){qa.Bu.jo--;0===qa.Bu.jo&&(ra(),delete ha.kk[na])},this.kk[na]=new n(na),qa.Bu=this.kk[na],
qa.Bu.cancel=qa.cancel)}}else delete this.hi[aa],ca(Error('File not found: "'+aa+'"'),aa)};fa.prototype.k5=function(aa,ca,ha,na,la){if(aa.length!==ca.stop-ca.start)la(Error("Part data is wrong size!"),na);else{do{if(!this.kk[ha])return;na=this.kk[ha].jo;for(var ka=ca.Ts.length,ra=0;ra<ka;++ra){var qa=ca.Ts[ra];la(!1,qa.Ps,aa["string"===typeof aa?"substring":"subarray"](qa.start,qa.stop),this.de.T1(qa.Ps));qa.Ps in this.hi&&delete this.hi[qa.Ps]}}while(na!==this.kk[ha].jo);delete this.kk[ha]}};fa.DISABLE_RANGE_HEADER=
!1;fa.bU=3;return fa}(wa.a);(function(ba){function fa(aa,ca,ha){var na=ba.call(this)||this,la;for(la in aa)na[la]=aa[la];na.xEa=aa;na.startOffset=ca;na.endOffset=ha;na.VY=function(ka,ra,qa,ta){Object(oa.isUndefined)(ra.stop)?(ra.start+=na.endOffset,ra.stop=na.endOffset):(ra.start+=na.startOffset,ra.stop+=na.startOffset);ka=na.Ly(na.url,ra,na.HE);return new aa.oB(ka,ra,qa,ta)};return na}Object(pa.c)(fa,ba);return fa})(w);Object(h.a)(w);Object(h.b)(w);sa["default"]=w}}]);}).call(this || window)

/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{530:function(wa,ta,r){function pa(){return!1}function na(z,aa,fa){if(!(aa in w))return!0;aa=w[aa];for(var ca=0;ca<aa.length;ca++){var ea=z;var ba=aa[ca];var ma=fa;if(ba.name in ea){var la="",ka=!1;ea=ea[ba.name];switch(ba.type){case "s":la="String";ka=Object(ja.isString)(ea);break;case "a":la="Array";ka=Object(ja.isArray)(ea);break;case "n":la="Number";ka=Object(ja.isNumber)(ea)&&Object(ja.isFinite)(ea);break;case "o":la="Object",
ka=Object(ja.isObject)(ea)&&!Object(ja.isArray)(ea)}ka||ma.reject('Expected response field "'+ba.name+'" to have type '+la);ba=ka}else ma.reject('Response missing field "'+ba.name+'"'),ba=!1;if(!ba)return!1}return!0}function oa(z){for(var aa=0,fa=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];aa<fa.length;aa++){var ca=fa[aa],ea=ca;ca=ca.charAt(0).toUpperCase()+ca.slice(1);z[ea]&&(Object.defineProperty(z,ca,Object.getOwnPropertyDescriptor(z,
ea)),delete z[ea])}return z}r.r(ta);var ia=r(0),ja=r(1);r.n(ja);var ha=r(3);wa=r(51);var y=r(29),x=r(548),f=r(113),e=r(440),b=r(49),a=r(195),h=function(){function z(){this.request=this.result=null;this.state=0;var aa=this;aa.promise=new Promise(function(fa,ca){aa.resolve=function(){if(0===aa.state||4===aa.state)aa.state=1,aa.result=arguments[0],fa.apply(null,arguments)};aa.reject=function(){if(0===aa.state||4===aa.state)aa.state=2,ca.apply(null,arguments)}})}z.prototype.mw=function(){return 1===(this.state&
1)};z.prototype.psa=function(){return 2===(this.state&2)};z.prototype.tk=function(){return!this.psa()&&!this.mw()};z.prototype.Qra=function(){return 4===(this.state&4)};z.prototype.WS=function(){this.state|=4};return z}(),n=function(){function z(){this.Xv={};this.hc=[]}z.prototype.pop=function(){var aa=this.hc.pop();this.Xv[aa.key]=void 0;return aa};z.prototype.push=function(aa,fa){fa={key:aa,data:fa};this.hc.push(fa);this.Xv[aa]=fa.data};z.prototype.contains=function(aa){return!!this.Xv[aa]};z.prototype.get=
function(aa){return this.Xv[aa]};z.prototype.set=function(aa,fa){var ca=this;this.Xv[aa]=fa;this.hc.forEach(function(ea,ba){ea.key===aa&&(ca.hc[ba]=ea)})};z.prototype.remove=function(aa){var fa=this;this.Xv[aa]=void 0;this.hc.forEach(function(ca,ea){ca.key===aa&&fa.hc.splice(ea,1)})};z.prototype.length=function(){return this.hc.length};return z}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},
{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};r=function(){function z(aa,fa,ca){var ea=this;this.CT=this.x_=!1;this.wi=this.nK=this.Hx=this.uf=this.Zy=this.Iq=this.Yy=this.bp=null;this.Eo=
new h;this.Yr=new h;this.IF=!1;this.Fg=this.yf=this.zf=this.sg=null;this.bh=[];this.wG=[];this.cache={};this.timeStamp=0;this.ri=[];this.Ck=[];this.oO=null;this.j_=!1;this.O7=this.id=null;this.PQ=this.H2=pa;this.pj=0;this.OP=!1;this.K4=1;this.zk={};this.Ou=0;this.Sw=new n;fa.endsWith("/")||(fa+="/");ca=ca||{};this.x_=ca.disableWebsockets||!1;this.CT=ca.singleServerMode||!1;null!=ca.customQueryParameters&&Object(b.b)("wvsQueryParameters",ca.customQueryParameters);fa.endsWith("blackbox/")||(fa+="blackbox/");
this.bp=ca.uploadData||null;this.Hx=ca.uriData||null;this.Yy=ca.cacheKey||null;if(this.Iq=ca.officeOptions||null)this.Iq=oa(this.Iq);this.uf=ca.rasterizerOptions||null;this.Zy=ca.cadOptions||null;this.Uf=fa;this.NN=aa;this.Tq(!0);this.fv=(new x.a(fa,null,this.aj())).ena(!this.x_,function(ba){ea.iua(ba)},function(){return null},function(){ea.IF=!1},function(){ea.Hxa()})}z.prototype.nja=function(){var aa=this;return new Promise(function(fa,ca){var ea=new XMLHttpRequest;ea.open("GET",aa.Uf+"ck");ea.withCredentials=
aa.aj();ea.onreadystatechange=function(){ea.readyState===XMLHttpRequest.DONE&&(200===ea.status?fa():ca())};ea.send()})};z.prototype.yza=function(aa){this.H2=aa||pa;this.PQ=pa};z.prototype.Kha=function(){this.l7();return this.fv.qs(!0)};z.prototype.l7=function(){Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(aa){switch(aa.label){case 0:return this.Yr=new h,this.Eo=new h,this.IF=!1,this.id=null,this.j_=!1,[4,this.nja()];case 1:return aa.ba(),[2]}})})};z.prototype.Hxa=function(){this.H2();
this.l7();this.sg&&(this.sg.tk()?this.Bi(this.sg.request):this.sg.mw()&&this.PQ(this.sg.result.url,"pdf")&&(this.sg=null,this.j7()));this.Fg&&this.Fg.tk()&&this.Bi(this.Fg.request);this.zf&&this.zf.tk()?this.Bi(this.zf.request):this.yf&&this.yf.tk()&&this.n2();var aa;for(aa=0;aa<this.ri.length;aa++)this.ri[aa]&&(this.ri[aa].tk()?this.Bi(this.ri[aa].request):this.ri[aa].mw()&&this.PQ(this.ri[aa].result.url,"image")&&(this.ri[aa]=null,this.dJ(Object(ja.uniqueId)(),aa)));for(aa=0;aa<this.Ck.length;aa++)this.Ck[aa]&&
this.Ck[aa].tk()&&!this.Ck[aa].Qra()&&this.Bi(this.Ck[aa].request);for(aa=0;aa<this.bh.length;aa++)this.bh[aa]&&this.bh[aa].tk()&&this.Bi(this.bh[aa].request)};z.prototype.qra=function(){return this.IF?Promise.resolve():(this.IF=!0,this.timeStamp=Date.now(),this.fv.AH())};z.prototype.wCa=function(){var aa=this,fa,ca,ea,ba,ma;return new Promise(function(la,ka){if(aa.bp)fa=new FormData,fa.append("file",aa.bp.fileHandle,aa.bp.fileHandle.name),aa.Iq&&fa.append("officeOptions",JSON.stringify(aa.Iq)),aa.uf&&
fa.append("rasterizerOptions",JSON.stringify(aa.uf)),aa.Zy&&fa.append("cadOptions",aa.Zy.getJsonString()),aa.Yy&&fa.append("cacheKey",aa.Yy),ca=aa.bp.loadCallback,ba="upload",ea=aa.bp.extension;else if(aa.Hx)fa={uri:aa.Hx.uri,xHa:aa.Hx.shareId},fa=Object.keys(fa).map(function(sa){return sa+"="+(fa[sa]?encodeURIComponent(fa[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",ca=aa.Hx.loadCallback,ba="url",ea=aa.Hx.extension;else{la();return}var ra=new XMLHttpRequest,qa=Object(y.k)(aa.Uf,
"AuxUpload");qa=Object(a.a)(qa,{type:ba,ext:ea});ra.open("POST",qa);ra.withCredentials=aa.aj();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);aa.NN=sa.uri;ca(sa);la(sa)}});ra.addEventListener("error",function(){ka(ra.statusText+" "+JSON.stringify(ra))});aa.bp&&null!=aa.bp.onProgress&&(ra.upload.onprogress=function(sa){aa.bp.onProgress(sa)});ra.send(fa)})};z.prototype.vxa=function(aa){this.password=
aa||null;this.Eo.mw()||(this.Eo=new h,this.Bi({t:"pages"}));return this.Eo.promise};z.prototype.ZB=function(aa){this.oO=aa||null;this.Eo.mw()||this.Bi({t:"pages"});return this.Eo.promise};z.prototype.jz=function(aa){aa=Object.assign(aa,{uri:encodeURIComponent(this.NN)});this.oO&&(aa.ext=this.oO);this.wi&&(aa.c=this.wi);this.password&&(aa.pswd=this.password);this.Yy&&(aa.cacheKey=this.Yy);this.Iq&&(aa.officeOptions=this.Iq);this.uf&&(aa.rastOptions=this.uf);this.Zy&&(aa.cadOptions=this.Zy.mImpl);return aa};
z.prototype.kya=function(){0<this.Sw.length()&&10>=this.Ou&&this.lya(this.Sw.pop().data)};z.prototype.Yga=function(aa){0<this.Sw.length()&&this.Sw.contains(aa)&&this.Sw.remove(aa)};z.prototype.Bi=function(aa){aa=this.jz(aa);this.fv.send(aa)};z.prototype.J7=function(aa,fa){10<this.Ou?this.Sw.push(aa,fa):(this.Ou++,aa=this.jz(fa),this.fv.send(aa))};z.prototype.lya=function(aa){this.Ou++;aa=this.jz(aa);this.fv.send(aa)};z.prototype.Jn=function(aa){return aa};z.prototype.G2=function(aa){this.CT&&aa?Object(ha.j)("Server failed health check. Single server mode ignoring check."):
!this.zFa&&aa&&3>=this.pj?(this.OP=!0,this.fv.qs()):3<this.pj&&(this.CT=!0)};z.prototype.iua=function(aa){var fa=this,ca=aa.data,ea=aa.err,ba=aa.t;switch(ba){case "upload":ea?this.xCa.reject(ea):this.xCa.resolve("Success");break;case "pages":ea?this.Eo.reject(ea):na(ca,ba,this.Eo)&&this.Eo.resolve(ca);break;case "config":if(ea)this.Yr.reject(ea);else if(na(ca,ba,this.Yr)){this.G2(ca.unhealthy);ca.id&&(this.id=ca.id);if(ca.auth){var ma=Object(b.a)("wvsQueryParameters");ma.auth=ca.auth;Object(b.b)("wvsQueryParameters",
ma)}ca.serverVersion&&(this.nK=ca.serverVersion,Object(ha.h)("[WebViewer Server] server version: "+this.nK));ca.serverID?(this.pj=ca.serverID===this.O7&&this.OP?this.pj+1:0,this.O7=ca.serverID):this.pj=0;this.OP=!1;this.Yr.resolve(ca)}break;case "health":ea?this.Yr.reject(ea):na(ca,ba,this.Yr)&&this.G2(ca.unhealthy);break;case "pdf":ca.url=Object(a.a)(this.Uf+"../"+encodeURI(ca.url));ea?this.sg.reject(ea):na(ca,ba,this.sg)&&this.sg.resolve(ca);break;case "ApString2Xod":ca.url=Object(a.a)(this.Uf+
"../data/"+encodeURI(ca.url));ea?this.zk[ca.rID].reject(ea):na(ca,ba,this.zk[ca.rID])&&this.zk[ca.rID].resolve(ca);break;case "docmod":ca.url=Object(a.a)(this.Uf+"../"+encodeURI(ca.url));ea?this.zk[ca.rID].reject(ea):na(ca,ba,this.sg)&&this.zk[ca.rID].resolve(ca);break;case "xod":if(ea)this.zf&&this.zf.tk()&&this.zf.reject(ea),this.yf&&this.yf.tk()&&this.yf.reject(ea);else if(ca.notFound)ca.noCreate||this.zf&&this.zf.tk()&&this.zf.resolve(ca),this.yf&&this.yf.tk()&&this.yf.resolve(ca);else{ca.url&&
(ca.url=Object(a.a)(this.Uf+"../"+encodeURI(ca.url)));if(!this.yf||this.yf.mw())this.yf=new h,this.yf.request={t:"xod",noCreate:!0};this.zf||(this.zf=new h,this.zf.request={t:"xod"});this.yf.resolve(ca);this.zf.resolve(ca)}break;case "cAnnots":ma=this.Fg;if(ea)ma.reject(ea);else if(na(ca,ba,ma)){ma.WS();var la=[],ka=ca.annots;ca=function(Ja){var Fa=ka[Ja].s,Da=ka[Ja].e,Pa=ra.Uf+"../"+encodeURI(ka[Ja].xfdf),Ka="true"===ka[Ja].hasAppearance?Object(a.a)(Pa+".xodapp"):null,Ha=Object(ja.range)(Fa,Da+1);
la[Ja]={range:Ha,promise:new Promise(function(Oa,Ua){var La=new XMLHttpRequest;La.open("GET",Object(a.a)(Pa));La.responseType="text";La.withCredentials=fa.aj();La.addEventListener("load",function(){La.readyState===La.DONE&&200===La.status&&Oa({Zt:La.response,wn:Ka,range:Ha})});La.addEventListener("error",function(){Ua(La.statusText+" "+JSON.stringify(La))});La.send()})}};var ra=this;for(ea=0;ea<ka.length;ea++)ca(ea);ma.resolve(la)}break;case "annots":if(ea)this.Fg.reject(ea);else if(na(ca,ba,this.Fg)){this.Fg.WS();
var qa=new XMLHttpRequest;ma=this.Uf+"../"+encodeURI(ca.url);var sa=ca.hasAppearance?Object(a.a)(ma+".xodapp"):null;qa.open("GET",Object(a.a)(ma));qa.responseType="text";qa.withCredentials=this.aj();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&fa.Fg.resolve({Zt:qa.response,wn:sa})});qa.addEventListener("error",function(){fa.Fg.reject(qa.statusText+" "+JSON.stringify(qa))});qa.send()}break;case "image":this.Ou--;var va=this.ri[ca.p];ea?va.promise.reject(ea):na(ca,
ba,va)&&(va.result=ca,va.result.url=Object(a.a)(this.Uf+"../"+encodeURI(va.result.url)),va.resolve(va.result));break;case "tiles":this.Ou--;va=ca.rID;ma=this.bh[va];this.bh[va]=null;this.wG.push(va);if(ea)ma.reject(ea);else if(na(ca,ba,ma)){for(ea=0;ea<ca.tiles.length;ea++)ca.tiles[ea]=Object(a.a)(this.Uf+"../"+encodeURI(ca.tiles[ea]));ma.resolve(ca)}break;case "text":va=this.Ck[ca.p];if(ea)va.reject(ea);else if(na(ca,ba,va)){va.WS();var ya=new XMLHttpRequest;ca=Object(a.a)(this.Uf+"../"+encodeURI(ca.url));
ya.open("GET",ca);ya.withCredentials=this.aj();ya.addEventListener("load",function(){ya.readyState===ya.DONE&&200===ya.status&&(va.result=JSON.parse(ya.response),va.resolve(va.result))});ya.addEventListener("error",function(Ja){va.reject(ya.statusText+" "+JSON.stringify(Ja))});ya.send()}break;case "progress":"loading"===ca.t&&this.trigger(f.a.Events.DOCUMENT_LOADING_PROGRESS,[ca.bytes,ca.total])}this.kya();!ba&&aa.echo&&aa&&"apstring2xod"===aa.echo.t&&(aa=aa.echo.reqID)&&(2<=parseInt(this.nK,10)?
this.zk[aa].reject("Message unhandled by server"):this.zk[aa].reject())};z.prototype.Wna=function(){return Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(aa){switch(aa.label){case 0:return[4,this.qra()];case 1:return aa.ba(),[2,this.Yr.promise]}})})};z.prototype.Bna=function(aa){for(var fa=this,ca=new XMLHttpRequest,ea=Object(a.a)(this.Uf+"aul",{id:this.id}),ba=new FormData,ma={},la=0;la<aa.body.length;la++){var ka=aa.body[la];ma[ka.id]=ka.yM.w+";"+ka.yM.h;ba.append(ka.id,
ka.yM.dataString)}aa={t:"apstring2xod",reqID:this.K4++,parts:ma};var ra=this.jz(aa);ba.append("msg",JSON.stringify(ra));this.zk[ra.reqID]=new h;ca.open("POST",ea);ca.withCredentials=this.aj;ea=new Promise(function(qa,sa){ca.onreadystatechange=function(){4===ca.readyState&&(200===ca.status?qa():sa("An error occurred while sending down appearance strings to the server"))}});ca.send(ba);return ea.then(function(){return fa.zk[ra.reqID].promise})};z.prototype.Nha=function(){var aa=this.nK.split("-")[0].split("."),
fa=["1","5","9"];if(3!==aa.length)throw Error("Invalid WVS version length.");if(3!==fa.length)throw Error("Invalid version length.");for(var ca=0;ca<aa.length;++ca){if(fa.length===ca||aa[ca]>fa[ca])return-1;if(aa[ca]!==fa[ca])return 1}return 0};z.prototype.Tr=function(){return 0>=this.Nha()};z.prototype.AO=function(){this.Fg||(this.Fg=new h,this.Tr()?this.Fg.request={t:"cAnnots"}:this.Fg.request={t:"annots"},this.Bi(this.Fg.request));return this.Fg.promise};z.prototype.dJ=function(aa,fa){this.ri[fa]||
(this.ri[fa]=new h,this.ri[fa].request={t:"image",p:fa},this.J7(aa,this.ri[fa].request));return this.ri[fa].promise};z.prototype.wxa=function(aa){this.Ck[aa]||(this.Ck[aa]=new h,this.Ck[aa].request={t:"text",p:aa},this.Bi(this.Ck[aa].request));return this.Ck[aa].promise};z.prototype.xxa=function(aa,fa,ca,ea,ba){var ma=this.bh.length;this.wG.length&&(ma=this.wG.pop());this.bh[ma]=new h;this.bh[ma].request={t:"tiles",p:fa,z:ca,r:ea,size:ba,rID:ma};this.J7(aa,this.bh[ma].request);return this.bh[ma].promise};
z.prototype.j7=function(){this.sg||(this.sg=new h,this.sg.request={t:"pdf"},this.j_?this.sg.resolve({url:this.NN}):this.Bi(this.sg.request));return this.sg.promise};z.prototype.t1=function(aa){var fa=this,ca=new XMLHttpRequest,ea=Object(a.a)(this.Uf+"aul",{id:this.id}),ba=new FormData,ma={};aa.annots&&(ma.annots="xfdf");aa.watermark&&(ma.watermark="png");aa.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.K4++,parts:ma};aa.print&&(ma.print=!0);var la=this.jz(ma);ba.append("msg",JSON.stringify(la));
return Promise.all([aa.annots,aa.watermark,aa.redactions].map(function(ka){return Promise.resolve(ka)})).then(function(ka){var ra=ka[0],qa=ka[1];ka=ka[2];ra&&ba.append("annots",ra);qa&&ba.append("watermark",qa);ka&&ba.append("redactions",ka);fa.zk[la.reqID]=new h;ca.open("POST",ea);ca.withCredentials=fa.aj;ra=new Promise(function(sa,va){ca.onreadystatechange=function(){4===ca.readyState&&(200===ca.status?sa():va("An error occurred while sending down annotation data to the server"))}});ca.send(ba);
return ra.then(function(){return fa.zk[la.reqID].promise})})};z.prototype.n2=function(){this.yf||(this.yf=new h,this.yf.request={t:"xod",noCreate:!0},this.Bi(this.yf.request));return this.yf.promise};z.prototype.yxa=function(){this.zf||(this.zf=new h,this.zf.request={t:"xod"},this.Bi(this.zf.request));return this.zf.promise};z.prototype.Oq=function(){return!0};z.prototype.request=function(){};z.prototype.x6=function(){};z.prototype.abort=function(){for(var aa=0;aa<this.bh.length;aa++)this.bh[aa]&&
(this.bh[aa].resolve(null),this.bh[aa]=null,this.wG.push(aa));this.close()};z.prototype.rJ=function(aa){this.wi=this.wi||{};this.wi.headers=aa};z.prototype.Tq=function(aa){this.wi=this.wi||{};this.wi.internal=this.wi.internal||{};this.wi.internal.withCredentials=aa};z.prototype.aj=function(){return this.wi&&this.wi.internal?this.wi.internal.withCredentials:null};z.prototype.getFileData=function(){return Promise.reject()};return z}();Object(wa.a)(r);Object(e.a)(r);Object(e.b)(r);ta["default"]=r},548:function(wa,
ta,r){var pa=r(0),na=r(3),oa=r(29),ia=r(49),ja=r(195),ha=r(88),y=function(){function f(e,b,a,h,n,w){void 0===a&&(a=null);void 0===h&&(h=null);void 0===n&&(n=null);void 0===w&&(w=null);this.l4=!1;this.pj=0;this.aZ=this.SCa(e);this.url=b?this.aZ+"/"+b:this.aZ+"/ws";this.zN=a;this.uB=h;this.hz=n;this.qS=w}f.prototype.SCa=function(e){var b=e.indexOf("://"),a="ws://";0>b?b=0:(5===b&&(a="wss://"),b+=3);var h=e.lastIndexOf("/");0>h&&(h=e.length);return a+e.slice(b,h)};f.prototype.send=function(e){this.er.readyState===
WebSocket.CLOSED||this.l4||this.er.send(JSON.stringify(e))};f.prototype.AH=function(){return Object(pa.b)(this,void 0,void 0,function(){var e,b=this;return Object(pa.d)(this,function(){e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",e);return[2,new Promise(function(a,h){var n=Object(ja.a)(b.url);b.er=new WebSocket(n);b.er.onopen=function(){b.uB&&b.uB();a()};b.er.onerror=function(w){b.l4=!0;h(w)};b.er.onclose=function(w){var z=w.code;return Object(pa.b)(b,
void 0,void 0,function(){var aa=this;return Object(pa.d)(this,function(fa){switch(fa.label){case 0:return this.hz&&this.hz(),3E3===z?[3,3]:8>this.pj++?[4,new Promise(function(ca){return setTimeout(function(){return Object(pa.b)(aa,void 0,void 0,function(){return Object(pa.d)(this,function(ea){switch(ea.label){case 0:return this.qS(),[4,this.AH()];case 1:return ea.ba(),ca(),[2]}})})},3E3)})]:[3,2];case 1:return fa.ba(),[3,3];case 2:h(ha.a),fa.label=3;case 3:return[2]}})})};b.er.onmessage=function(w){w&&
w.data&&(w=JSON.parse(w.data),w.hb?b.send({hb:!0}):w.end?close():b.zN(w))}})]})})};f.prototype.qs=function(e){void 0===e&&(e=!1);this.pj=0;e?this.er.close(3E3):this.er.close();return Promise.resolve()};return f}(),x=function(){function f(e,b,a,h,n,w,z){void 0===h&&(h=null);void 0===n&&(n=null);void 0===w&&(w=null);void 0===z&&(z=null);this.pj=this.cJ=this.id=0;this.AA=!1;this.request=null;e=this.Lva(e);this.url=b?e+"/"+b+"pf":e+"/pf";this.gK=a;this.zN=h;this.uB=n;this.hz=w;this.qS=z}f.prototype.Lva=
function(e){var b=e.lastIndexOf("/");0>b&&(b=e.length);return e.slice(0,b)};f.prototype.Qia=function(e){e=e.split("\n");for(e[e.length-1]&&e.pop();0<e.length&&3>e[e.length-1].length;)"]"===e.pop()&&(this.id=0);0<e.length&&3>e[0].length&&e.shift();for(var b=0;b<e.length;++b)e[b].endsWith(",")&&(e[b]=e[b].substr(0,e[b].length-1));return e};f.prototype.v7=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(b){switch(b.label){case 0:return 8>this.pj++?
[4,new Promise(function(a){return setTimeout(function(){e.qS();e.AH();a()},3E3)})]:[3,2];case 1:b.ba(),b.label=2;case 2:return[2]}})})};f.prototype.Nva=function(e){Object(pa.b)(this,void 0,void 0,function(){var b,a;return Object(pa.d)(this,function(h){switch(h.label){case 0:b=null,a=0,h.label=1;case 1:if(!(a<e.length))return[3,6];b=JSON.parse(e[a]);if(!b)return[3,5];if(!b.end)return[3,2];close();return[3,5];case 2:if(!b.id||Number(b.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");
this.qs();return[4,this.v7()];case 3:return h.ba(),[3,5];case 4:b.hb&&Number(b.id)===this.id?this.send({hb:!0}):this.AA||this.zN(b),h.label=5;case 5:return++a,[3,1];case 6:return[2]}})})};f.prototype.fua=function(e){Object(pa.b)(this,void 0,void 0,function(){var b,a,h;return Object(pa.d)(this,function(n){switch(n.label){case 0:if(!(3<=e.readyState))return[3,2];try{b=e.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<b)try{a=this.Qia(e.responseText),0===this.id&&0<a.length&&
(h=JSON.parse(a.shift()),this.id=h.id,this.pj=0),this.Nva(a)}catch(w){}return this.AA?[3,2]:[4,this.f0()];case 1:n.ba(),n.label=2;case 2:return[2]}})})};f.prototype.f0=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(){return[2,new Promise(function(b,a){function h(){return Object(pa.b)(e,void 0,void 0,function(){return Object(pa.d)(this,function(w){switch(w.label){case 0:a(),this.qs(),w.label=1;case 1:return this.AA&&8>this.pj?[4,this.v7()]:
[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}e.request=new XMLHttpRequest;e.request.withCredentials=e.gK;var n=Object(ja.a)(e.url,0!==e.id?{id:String(e.id),uc:String(e.cJ)}:{uc:String(e.cJ)});e.cJ++;e.request.open("GET",n,!0);e.request.setRequestHeader("Cache-Control","no-cache");e.request.setRequestHeader("X-Requested-With","XMLHttpRequest");e.request.onreadystatechange=function(){e.fua(e.request)};e.request.addEventListener("error",h);e.request.addEventListener("timeout",h);e.request.addEventListener("load",
function(){e.uB&&e.uB();b()});e.request.send()})]})})};f.prototype.AH=function(){var e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",e);this.cJ=this.id=0;this.AA=!1;return this.f0()};f.prototype.send=function(e){var b=this,a=new XMLHttpRequest;a.withCredentials=this.gK;var h=Object(ja.a)(this.url,{id:String(this.id)}),n=new FormData;n.append("data",JSON.stringify(e));a.addEventListener("error",function(){b.qs()});a.open("POST",h);a.setRequestHeader("X-Requested-With",
"XMLHttpRequest");a.send(n)};f.prototype.qs=function(){this.id=0;this.AA=!0;this.hz&&this.hz();this.request.abort();return Promise.resolve()};return f}();wa=function(){function f(e,b,a){this.JZ=e;this.target=b;this.gK=a}f.prototype.ena=function(e,b,a,h,n){void 0===e&&(e=!0);void 0===b&&(b=null);void 0===a&&(a=null);void 0===h&&(h=null);void 0===n&&(n=null);return e?new y(this.JZ,this.target,b,a,h,n):new x(this.JZ,this.target,this.gK,b,a,h,n)};return f}();ta.a=wa}}]);}).call(this || window)

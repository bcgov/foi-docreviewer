/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{527:function(wa,sa,h){function pa(){return!1}function oa(w,ba,fa){if(!(ba in z))return!0;ba=z[ba];for(var aa=0;aa<ba.length;aa++){var ca=w;var ha=ba[aa];var na=fa;if(ha.name in ca){var la="",ka=!1;ca=ca[ha.name];switch(ha.type){case "s":la="String";ka=Object(ja.isString)(ca);break;case "a":la="Array";ka=Object(ja.isArray)(ca);break;case "n":la="Number";ka=Object(ja.isNumber)(ca)&&Object(ja.isFinite)(ca);break;case "o":la="Object",
ka=Object(ja.isObject)(ca)&&!Object(ja.isArray)(ca)}ka||na.reject('Expected response field "'+ha.name+'" to have type '+la);ha=ka}else na.reject('Response missing field "'+ha.name+'"'),ha=!1;if(!ha)return!1}return!0}function ma(w){for(var ba=0,fa=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ba<fa.length;ba++){var aa=fa[ba],ca=aa;aa=aa.charAt(0).toUpperCase()+aa.slice(1);w[ca]&&(Object.defineProperty(w,aa,Object.getOwnPropertyDescriptor(w,
ca)),delete w[ca])}return w}h.r(sa);var ia=h(0),ja=h(1);h.n(ja);var ea=h(3);wa=h(49);var y=h(28),x=h(545),f=h(113),e=h(437),a=h(47),b=h(193),n=function(){function w(){this.request=this.result=null;this.state=0;var ba=this;ba.promise=new Promise(function(fa,aa){ba.resolve=function(){if(0===ba.state||4===ba.state)ba.state=1,ba.result=arguments[0],fa.apply(null,arguments)};ba.reject=function(){if(0===ba.state||4===ba.state)ba.state=2,aa.apply(null,arguments)}})}w.prototype.Mv=function(){return 1===(this.state&
1)};w.prototype.vqa=function(){return 2===(this.state&2)};w.prototype.Wj=function(){return!this.vqa()&&!this.Mv()};w.prototype.Upa=function(){return 4===(this.state&4)};w.prototype.TR=function(){this.state|=4};return w}(),r=function(){function w(){this.wv={};this.ac=[]}w.prototype.pop=function(){var ba=this.ac.pop();this.wv[ba.key]=void 0;return ba};w.prototype.push=function(ba,fa){fa={key:ba,data:fa};this.ac.push(fa);this.wv[ba]=fa.data};w.prototype.contains=function(ba){return!!this.wv[ba]};w.prototype.get=
function(ba){return this.wv[ba]};w.prototype.set=function(ba,fa){var aa=this;this.wv[ba]=fa;this.ac.forEach(function(ca,ha){ca.key===ba&&(aa.ac[ha]=ca)})};w.prototype.remove=function(ba){var fa=this;this.wv[ba]=void 0;this.ac.forEach(function(aa,ca){aa.key===ba&&fa.ac.splice(ca,1)})};w.prototype.length=function(){return this.ac.length};return w}(),z={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},
{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};h=function(){function w(ba,fa,aa){var ca=this;this.BS=this.vZ=!1;this.gi=this.zJ=this.ax=this.lf=this.wy=this.iq=this.vy=this.Eo=null;this.ao=
new n;this.yr=new n;this.ZE=!1;this.sg=this.qf=this.rf=this.ig=null;this.Ng=[];this.JF=[];this.cache={};this.timeStamp=0;this.ai=[];this.ek=[];this.vN=null;this.hZ=!1;this.G6=this.id=null;this.SP=this.t1=pa;this.aj=0;this.SO=!1;this.z3=1;this.bk={};this.lu=0;this.mw=new r;fa.endsWith("/")||(fa+="/");aa=aa||{};this.vZ=aa.disableWebsockets||!1;this.BS=aa.singleServerMode||!1;null!=aa.customQueryParameters&&Object(a.b)("wvsQueryParameters",aa.customQueryParameters);fa.endsWith("blackbox/")||(fa+="blackbox/");
this.Eo=aa.uploadData||null;this.ax=aa.uriData||null;this.vy=aa.cacheKey||null;if(this.iq=aa.officeOptions||null)this.iq=ma(this.iq);this.lf=aa.rasterizerOptions||null;this.wy=aa.cadOptions||null;this.Lf=fa;this.WM=ba;this.sq(!0);this.Fu=(new x.a(fa,null,this.Mi())).sla(!this.vZ,function(ha){ca.nsa(ha)},function(){return null},function(){ca.ZE=!1},function(){ca.Lva()})}w.prototype.Hha=function(){var ba=this;return new Promise(function(fa,aa){var ca=new XMLHttpRequest;ca.open("GET",ba.Lf+"ck");ca.withCredentials=
ba.Mi();ca.onreadystatechange=function(){ca.readyState===XMLHttpRequest.DONE&&(200===ca.status?fa():aa())};ca.send()})};w.prototype.Hxa=function(ba){this.t1=ba||pa;this.SP=pa};w.prototype.jga=function(){this.d6();return this.Fu.Kr(!0)};w.prototype.d6=function(){Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(ba){switch(ba.label){case 0:return this.yr=new n,this.ao=new n,this.ZE=!1,this.id=null,this.hZ=!1,[4,this.Hha()];case 1:return ba.ba(),[2]}})})};w.prototype.Lva=function(){this.t1();
this.d6();this.ig&&(this.ig.Wj()?this.li(this.ig.request):this.ig.Mv()&&this.SP(this.ig.result.url,"pdf")&&(this.ig=null,this.b6()));this.sg&&this.sg.Wj()&&this.li(this.sg.request);this.rf&&this.rf.Wj()?this.li(this.rf.request):this.qf&&this.qf.Wj()&&this.a1();var ba;for(ba=0;ba<this.ai.length;ba++)this.ai[ba]&&(this.ai[ba].Wj()?this.li(this.ai[ba].request):this.ai[ba].Mv()&&this.SP(this.ai[ba].result.url,"image")&&(this.ai[ba]=null,this.rI(Object(ja.uniqueId)(),ba)));for(ba=0;ba<this.ek.length;ba++)this.ek[ba]&&
this.ek[ba].Wj()&&!this.ek[ba].Upa()&&this.li(this.ek[ba].request);for(ba=0;ba<this.Ng.length;ba++)this.Ng[ba]&&this.Ng[ba].Wj()&&this.li(this.Ng[ba].request)};w.prototype.vpa=function(){return this.ZE?Promise.resolve():(this.ZE=!0,this.timeStamp=Date.now(),this.Fu.PG())};w.prototype.DAa=function(){var ba=this,fa,aa,ca,ha,na;return new Promise(function(la,ka){if(ba.Eo)fa=new FormData,fa.append("file",ba.Eo.fileHandle,ba.Eo.fileHandle.name),ba.iq&&fa.append("officeOptions",JSON.stringify(ba.iq)),ba.lf&&
fa.append("rasterizerOptions",JSON.stringify(ba.lf)),ba.wy&&fa.append("cadOptions",ba.wy.getJsonString()),ba.vy&&fa.append("cacheKey",ba.vy),aa=ba.Eo.loadCallback,ha="upload",ca=ba.Eo.extension;else if(ba.ax)fa={uri:ba.ax.uri,XEa:ba.ax.shareId},fa=Object.keys(fa).map(function(ta){return ta+"="+(fa[ta]?encodeURIComponent(fa[ta]):"")}).join("&"),na="application/x-www-form-urlencoded; charset=UTF-8",aa=ba.ax.loadCallback,ha="url",ca=ba.ax.extension;else{la();return}var ra=new XMLHttpRequest,qa=Object(y.k)(ba.Lf,
"AuxUpload");qa=Object(b.a)(qa,{type:ha,ext:ca});ra.open("POST",qa);ra.withCredentials=ba.Mi();na&&ra.setRequestHeader("Content-Type",na);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var ta=JSON.parse(ra.response);ba.WM=ta.uri;aa(ta);la(ta)}});ra.addEventListener("error",function(){ka(ra.statusText+" "+JSON.stringify(ra))});ba.Eo&&null!=ba.Eo.onProgress&&(ra.upload.onprogress=function(ta){ba.Eo.onProgress(ta)});ra.send(fa)})};w.prototype.zva=function(ba){this.password=
ba||null;this.ao.Mv()||(this.ao=new n,this.li({t:"pages"}));return this.ao.promise};w.prototype.wB=function(ba){this.vN=ba||null;this.ao.Mv()||this.li({t:"pages"});return this.ao.promise};w.prototype.Iy=function(ba){ba=Object.assign(ba,{uri:encodeURIComponent(this.WM)});this.vN&&(ba.ext=this.vN);this.gi&&(ba.c=this.gi);this.password&&(ba.pswd=this.password);this.vy&&(ba.cacheKey=this.vy);this.iq&&(ba.officeOptions=this.iq);this.lf&&(ba.rastOptions=this.lf);this.wy&&(ba.cadOptions=this.wy.mImpl);return ba};
w.prototype.nwa=function(){0<this.mw.length()&&10>=this.lu&&this.owa(this.mw.pop().data)};w.prototype.xfa=function(ba){0<this.mw.length()&&this.mw.contains(ba)&&this.mw.remove(ba)};w.prototype.li=function(ba){ba=this.Iy(ba);this.Fu.send(ba)};w.prototype.B6=function(ba,fa){10<this.lu?this.mw.push(ba,fa):(this.lu++,ba=this.Iy(fa),this.Fu.send(ba))};w.prototype.owa=function(ba){this.lu++;ba=this.Iy(ba);this.Fu.send(ba)};w.prototype.dn=function(ba){return ba};w.prototype.s1=function(ba){this.BS&&ba?Object(ea.j)("Server failed health check. Single server mode ignoring check."):
!this.dDa&&ba&&3>=this.aj?(this.SO=!0,this.Fu.Kr()):3<this.aj&&(this.BS=!0)};w.prototype.nsa=function(ba){var fa=this,aa=ba.data,ca=ba.err,ha=ba.t;switch(ha){case "upload":ca?this.EAa.reject(ca):this.EAa.resolve("Success");break;case "pages":ca?this.ao.reject(ca):oa(aa,ha,this.ao)&&this.ao.resolve(aa);break;case "config":if(ca)this.yr.reject(ca);else if(oa(aa,ha,this.yr)){this.s1(aa.unhealthy);aa.id&&(this.id=aa.id);if(aa.auth){var na=Object(a.a)("wvsQueryParameters");na.auth=aa.auth;Object(a.b)("wvsQueryParameters",
na)}aa.serverVersion&&(this.zJ=aa.serverVersion,Object(ea.h)("[WebViewer Server] server version: "+this.zJ));aa.serverID?(this.aj=aa.serverID===this.G6&&this.SO?this.aj+1:0,this.G6=aa.serverID):this.aj=0;this.SO=!1;this.yr.resolve(aa)}break;case "health":ca?this.yr.reject(ca):oa(aa,ha,this.yr)&&this.s1(aa.unhealthy);break;case "pdf":aa.url=Object(b.a)(this.Lf+"../"+encodeURI(aa.url));ca?this.ig.reject(ca):oa(aa,ha,this.ig)&&this.ig.resolve(aa);break;case "ApString2Xod":aa.url=Object(b.a)(this.Lf+
"../data/"+encodeURI(aa.url));ca?this.bk[aa.rID].reject(ca):oa(aa,ha,this.bk[aa.rID])&&this.bk[aa.rID].resolve(aa);break;case "docmod":aa.url=Object(b.a)(this.Lf+"../"+encodeURI(aa.url));ca?this.bk[aa.rID].reject(ca):oa(aa,ha,this.ig)&&this.bk[aa.rID].resolve(aa);break;case "xod":if(ca)this.rf&&this.rf.Wj()&&this.rf.reject(ca),this.qf&&this.qf.Wj()&&this.qf.reject(ca);else if(aa.notFound)aa.noCreate||this.rf&&this.rf.Wj()&&this.rf.resolve(aa),this.qf&&this.qf.Wj()&&this.qf.resolve(aa);else{aa.url&&
(aa.url=Object(b.a)(this.Lf+"../"+encodeURI(aa.url)));if(!this.qf||this.qf.Mv())this.qf=new n,this.qf.request={t:"xod",noCreate:!0};this.rf||(this.rf=new n,this.rf.request={t:"xod"});this.qf.resolve(aa);this.rf.resolve(aa)}break;case "cAnnots":na=this.sg;if(ca)na.reject(ca);else if(oa(aa,ha,na)){na.TR();var la=[],ka=aa.annots;aa=function(Ja){var Ia=ka[Ja].s,Da=ka[Ja].e,Ma=ra.Lf+"../"+encodeURI(ka[Ja].xfdf),Ca="true"===ka[Ja].hasAppearance?Object(b.a)(Ma+".xodapp"):null,Ka=Object(ja.range)(Ia,Da+1);
la[Ja]={range:Ka,promise:new Promise(function(Ta,Sa){var Na=new XMLHttpRequest;Na.open("GET",Object(b.a)(Ma));Na.responseType="text";Na.withCredentials=fa.Mi();Na.addEventListener("load",function(){Na.readyState===Na.DONE&&200===Na.status&&Ta({wt:Na.response,Rm:Ca,range:Ka})});Na.addEventListener("error",function(){Sa(Na.statusText+" "+JSON.stringify(Na))});Na.send()})}};var ra=this;for(ca=0;ca<ka.length;ca++)aa(ca);na.resolve(la)}break;case "annots":if(ca)this.sg.reject(ca);else if(oa(aa,ha,this.sg)){this.sg.TR();
var qa=new XMLHttpRequest;na=this.Lf+"../"+encodeURI(aa.url);var ta=aa.hasAppearance?Object(b.a)(na+".xodapp"):null;qa.open("GET",Object(b.a)(na));qa.responseType="text";qa.withCredentials=this.Mi();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&fa.sg.resolve({wt:qa.response,Rm:ta})});qa.addEventListener("error",function(){fa.sg.reject(qa.statusText+" "+JSON.stringify(qa))});qa.send()}break;case "image":this.lu--;var va=this.ai[aa.p];ca?va.promise.reject(ca):oa(aa,
ha,va)&&(va.result=aa,va.result.url=Object(b.a)(this.Lf+"../"+encodeURI(va.result.url)),va.resolve(va.result));break;case "tiles":this.lu--;va=aa.rID;na=this.Ng[va];this.Ng[va]=null;this.JF.push(va);if(ca)na.reject(ca);else if(oa(aa,ha,na)){for(ca=0;ca<aa.tiles.length;ca++)aa.tiles[ca]=Object(b.a)(this.Lf+"../"+encodeURI(aa.tiles[ca]));na.resolve(aa)}break;case "text":va=this.ek[aa.p];if(ca)va.reject(ca);else if(oa(aa,ha,va)){va.TR();var xa=new XMLHttpRequest;aa=Object(b.a)(this.Lf+"../"+encodeURI(aa.url));
xa.open("GET",aa);xa.withCredentials=this.Mi();xa.addEventListener("load",function(){xa.readyState===xa.DONE&&200===xa.status&&(va.result=JSON.parse(xa.response),va.resolve(va.result))});xa.addEventListener("error",function(Ja){va.reject(xa.statusText+" "+JSON.stringify(Ja))});xa.send()}break;case "progress":"loading"===aa.t&&this.trigger(f.a.Events.DOCUMENT_LOADING_PROGRESS,[aa.bytes,aa.total])}this.nwa();!ha&&ba.echo&&ba&&"apstring2xod"===ba.echo.t&&(ba=ba.echo.reqID)&&(2<=parseInt(this.zJ,10)?
this.bk[ba].reject("Message unhandled by server"):this.bk[ba].reject())};w.prototype.hma=function(){return Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(ba){switch(ba.label){case 0:return[4,this.vpa()];case 1:return ba.ba(),[2,this.yr.promise]}})})};w.prototype.Pla=function(ba){for(var fa=this,aa=new XMLHttpRequest,ca=Object(b.a)(this.Lf+"aul",{id:this.id}),ha=new FormData,na={},la=0;la<ba.body.length;la++){var ka=ba.body[la];na[ka.id]=ka.KL.w+";"+ka.KL.h;ha.append(ka.id,
ka.KL.dataString)}ba={t:"apstring2xod",reqID:this.z3++,parts:na};var ra=this.Iy(ba);ha.append("msg",JSON.stringify(ra));this.bk[ra.reqID]=new n;aa.open("POST",ca);aa.withCredentials=this.Mi;ca=new Promise(function(qa,ta){aa.onreadystatechange=function(){4===aa.readyState&&(200===aa.status?qa():ta("An error occurred while sending down appearance strings to the server"))}});aa.send(ha);return ca.then(function(){return fa.bk[ra.reqID].promise})};w.prototype.mga=function(){var ba=this.zJ.split("-")[0].split("."),
fa=["1","5","9"];if(3!==ba.length)throw Error("Invalid WVS version length.");if(3!==fa.length)throw Error("Invalid version length.");for(var aa=0;aa<ba.length;++aa){if(fa.length===aa||ba[aa]>fa[aa])return-1;if(ba[aa]!==fa[aa])return 1}return 0};w.prototype.tr=function(){return 0>=this.mga()};w.prototype.GN=function(){this.sg||(this.sg=new n,this.tr()?this.sg.request={t:"cAnnots"}:this.sg.request={t:"annots"},this.li(this.sg.request));return this.sg.promise};w.prototype.rI=function(ba,fa){this.ai[fa]||
(this.ai[fa]=new n,this.ai[fa].request={t:"image",p:fa},this.B6(ba,this.ai[fa].request));return this.ai[fa].promise};w.prototype.Ava=function(ba){this.ek[ba]||(this.ek[ba]=new n,this.ek[ba].request={t:"text",p:ba},this.li(this.ek[ba].request));return this.ek[ba].promise};w.prototype.Bva=function(ba,fa,aa,ca,ha){var na=this.Ng.length;this.JF.length&&(na=this.JF.pop());this.Ng[na]=new n;this.Ng[na].request={t:"tiles",p:fa,z:aa,r:ca,size:ha,rID:na};this.B6(ba,this.Ng[na].request);return this.Ng[na].promise};
w.prototype.b6=function(){this.ig||(this.ig=new n,this.ig.request={t:"pdf"},this.hZ?this.ig.resolve({url:this.WM}):this.li(this.ig.request));return this.ig.promise};w.prototype.n0=function(ba){var fa=this,aa=new XMLHttpRequest,ca=Object(b.a)(this.Lf+"aul",{id:this.id}),ha=new FormData,na={};ba.annots&&(na.annots="xfdf");ba.watermark&&(na.watermark="png");ba.redactions&&(na.redactions="redact");na={t:"docmod",reqID:this.z3++,parts:na};ba.print&&(na.print=!0);var la=this.Iy(na);ha.append("msg",JSON.stringify(la));
return Promise.all([ba.annots,ba.watermark,ba.redactions].map(function(ka){return Promise.resolve(ka)})).then(function(ka){var ra=ka[0],qa=ka[1];ka=ka[2];ra&&ha.append("annots",ra);qa&&ha.append("watermark",qa);ka&&ha.append("redactions",ka);fa.bk[la.reqID]=new n;aa.open("POST",ca);aa.withCredentials=fa.Mi;ra=new Promise(function(ta,va){aa.onreadystatechange=function(){4===aa.readyState&&(200===aa.status?ta():va("An error occurred while sending down annotation data to the server"))}});aa.send(ha);
return ra.then(function(){return fa.bk[la.reqID].promise})})};w.prototype.a1=function(){this.qf||(this.qf=new n,this.qf.request={t:"xod",noCreate:!0},this.li(this.qf.request));return this.qf.promise};w.prototype.Cva=function(){this.rf||(this.rf=new n,this.rf.request={t:"xod"},this.li(this.rf.request));return this.rf.promise};w.prototype.pq=function(){return!0};w.prototype.request=function(){};w.prototype.p5=function(){};w.prototype.abort=function(){for(var ba=0;ba<this.Ng.length;ba++)this.Ng[ba]&&
(this.Ng[ba].resolve(null),this.Ng[ba]=null,this.JF.push(ba));this.close()};w.prototype.EI=function(ba){this.gi=this.gi||{};this.gi.headers=ba};w.prototype.sq=function(ba){this.gi=this.gi||{};this.gi.internal=this.gi.internal||{};this.gi.internal.withCredentials=ba};w.prototype.Mi=function(){return this.gi&&this.gi.internal?this.gi.internal.withCredentials:null};w.prototype.getFileData=function(){return Promise.reject()};return w}();Object(wa.a)(h);Object(e.a)(h);Object(e.b)(h);sa["default"]=h},545:function(wa,
sa,h){var pa=h(0),oa=h(3),ma=h(28),ia=h(47),ja=h(193),ea=h(85),y=function(){function f(e,a,b,n,r,z){void 0===b&&(b=null);void 0===n&&(n=null);void 0===r&&(r=null);void 0===z&&(z=null);this.Z2=!1;this.aj=0;this.$X=this.ZAa(e);this.url=a?this.$X+"/"+a:this.$X+"/ws";this.IM=b;this.TA=n;this.Gy=r;this.qR=z}f.prototype.ZAa=function(e){var a=e.indexOf("://"),b="ws://";0>a?a=0:(5===a&&(b="wss://"),a+=3);var n=e.lastIndexOf("/");0>n&&(n=e.length);return b+e.slice(a,n)};f.prototype.send=function(e){this.Dq.readyState===
WebSocket.CLOSED||this.Z2||this.Dq.send(JSON.stringify(e))};f.prototype.PG=function(){return Object(pa.b)(this,void 0,void 0,function(){var e,a=this;return Object(pa.d)(this,function(){e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(ma.l)(8);Object(ia.b)("wvsQueryParameters",e);return[2,new Promise(function(b,n){var r=Object(ja.a)(a.url);a.Dq=new WebSocket(r);a.Dq.onopen=function(){a.TA&&a.TA();b()};a.Dq.onerror=function(z){a.Z2=!0;n(z)};a.Dq.onclose=function(z){var w=z.code;return Object(pa.b)(a,
void 0,void 0,function(){var ba=this;return Object(pa.d)(this,function(fa){switch(fa.label){case 0:return this.Gy&&this.Gy(),3E3===w?[3,3]:8>this.aj++?[4,new Promise(function(aa){return setTimeout(function(){return Object(pa.b)(ba,void 0,void 0,function(){return Object(pa.d)(this,function(ca){switch(ca.label){case 0:return this.qR(),[4,this.PG()];case 1:return ca.ba(),aa(),[2]}})})},3E3)})]:[3,2];case 1:return fa.ba(),[3,3];case 2:n(ea.a),fa.label=3;case 3:return[2]}})})};a.Dq.onmessage=function(z){z&&
z.data&&(z=JSON.parse(z.data),z.hb?a.send({hb:!0}):z.end?close():a.IM(z))}})]})})};f.prototype.Kr=function(e){void 0===e&&(e=!1);this.aj=0;e?this.Dq.close(3E3):this.Dq.close();return Promise.resolve()};return f}(),x=function(){function f(e,a,b,n,r,z,w){void 0===n&&(n=null);void 0===r&&(r=null);void 0===z&&(z=null);void 0===w&&(w=null);this.aj=this.qI=this.id=0;this.bA=!1;this.request=null;e=this.Pta(e);this.url=a?e+"/"+a+"pf":e+"/pf";this.rJ=b;this.IM=n;this.TA=r;this.Gy=z;this.qR=w}f.prototype.Pta=
function(e){var a=e.lastIndexOf("/");0>a&&(a=e.length);return e.slice(0,a)};f.prototype.mha=function(e){e=e.split("\n");for(e[e.length-1]&&e.pop();0<e.length&&3>e[e.length-1].length;)"]"===e.pop()&&(this.id=0);0<e.length&&3>e[0].length&&e.shift();for(var a=0;a<e.length;++a)e[a].endsWith(",")&&(e[a]=e[a].substr(0,e[a].length-1));return e};f.prototype.n6=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(a){switch(a.label){case 0:return 8>this.aj++?
[4,new Promise(function(b){return setTimeout(function(){e.qR();e.PG();b()},3E3)})]:[3,2];case 1:a.ba(),a.label=2;case 2:return[2]}})})};f.prototype.Rta=function(e){Object(pa.b)(this,void 0,void 0,function(){var a,b;return Object(pa.d)(this,function(n){switch(n.label){case 0:a=null,b=0,n.label=1;case 1:if(!(b<e.length))return[3,6];a=JSON.parse(e[b]);if(!a)return[3,5];if(!a.end)return[3,2];close();return[3,5];case 2:if(!a.id||Number(a.id)===this.id)return[3,4];Object(oa.j)("Reconnecting, new server detected");
this.Kr();return[4,this.n6()];case 3:return n.ba(),[3,5];case 4:a.hb&&Number(a.id)===this.id?this.send({hb:!0}):this.bA||this.IM(a),n.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};f.prototype.ksa=function(e){Object(pa.b)(this,void 0,void 0,function(){var a,b,n;return Object(pa.d)(this,function(r){switch(r.label){case 0:if(!(3<=e.readyState))return[3,2];try{a=e.responseText.length}catch(z){return Object(oa.h)("caught exception"),[2]}if(0<a)try{b=this.mha(e.responseText),0===this.id&&0<b.length&&
(n=JSON.parse(b.shift()),this.id=n.id,this.aj=0),this.Rta(b)}catch(z){}return this.bA?[3,2]:[4,this.b_()];case 1:r.ba(),r.label=2;case 2:return[2]}})})};f.prototype.b_=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(){return[2,new Promise(function(a,b){function n(){return Object(pa.b)(e,void 0,void 0,function(){return Object(pa.d)(this,function(z){switch(z.label){case 0:b(),this.Kr(),z.label=1;case 1:return this.bA&&8>this.aj?[4,this.n6()]:
[3,3];case 2:return z.ba(),[3,1];case 3:return[2]}})})}e.request=new XMLHttpRequest;e.request.withCredentials=e.rJ;var r=Object(ja.a)(e.url,0!==e.id?{id:String(e.id),uc:String(e.qI)}:{uc:String(e.qI)});e.qI++;e.request.open("GET",r,!0);e.request.setRequestHeader("Cache-Control","no-cache");e.request.setRequestHeader("X-Requested-With","XMLHttpRequest");e.request.onreadystatechange=function(){e.ksa(e.request)};e.request.addEventListener("error",n);e.request.addEventListener("timeout",n);e.request.addEventListener("load",
function(){e.TA&&e.TA();a()});e.request.send()})]})})};f.prototype.PG=function(){var e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(ma.l)(8);Object(ia.b)("wvsQueryParameters",e);this.qI=this.id=0;this.bA=!1;return this.b_()};f.prototype.send=function(e){var a=this,b=new XMLHttpRequest;b.withCredentials=this.rJ;var n=Object(ja.a)(this.url,{id:String(this.id)}),r=new FormData;r.append("data",JSON.stringify(e));b.addEventListener("error",function(){a.Kr()});b.open("POST",n);b.setRequestHeader("X-Requested-With",
"XMLHttpRequest");b.send(r)};f.prototype.Kr=function(){this.id=0;this.bA=!0;this.Gy&&this.Gy();this.request.abort();return Promise.resolve()};return f}();wa=function(){function f(e,a,b){this.HY=e;this.target=a;this.rJ=b}f.prototype.sla=function(e,a,b,n,r){void 0===e&&(e=!0);void 0===a&&(a=null);void 0===b&&(b=null);void 0===n&&(n=null);void 0===r&&(r=null);return e?new y(this.HY,this.target,a,b,n,r):new x(this.HY,this.target,this.rJ,a,b,n,r)};return f}();sa.a=wa}}]);}).call(this || window)
